import{_ as r,r as o,o as t,c as D,b as s,a,w as e,d as n,e as i}from"./app-ju10JTa9.js";const d={},y=s("h1",{id:"frp-使用指南",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#frp-使用指南"},[s("span",null,"FRP 使用指南")])],-1),v={class:"table-of-contents"},u=s("h2",{id:"1-frp-简介",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#1-frp-简介"},[s("span",null,"1. FRP 简介")])],-1),C={href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"},m=s("p",null,"FRP 分为客户端和服务端分别称为 frpc 和 frps，客户端用于连接内网的应用程序，服务端用于提供代理服务。",-1),E=s("p",null,"FRP 还提供管理界面，可以通过浏览器访问管理界面，查看代理服务的状态，可以查看每日的流量情况。",-1),b=s("p",null,"大多数情况下我们只需要 TCP 代理即可，HTTP/HTTPS 代理可以支持更多功能，但是需要配置更多参数。",-1),h=s("h2",{id:"2-docker-部署",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#2-docker-部署"},[s("span",null,"2. Docker 部署")])],-1),_={href:"https://hub.docker.com/u/snowdreamtech",target:"_blank",rel:"noopener noreferrer"},x={href:"https://hub.docker.com/r/snowdreamtech/frpc",target:"_blank",rel:"noopener noreferrer"},k={href:"https://hub.docker.com/r/snowdreamtech/frps",target:"_blank",rel:"noopener noreferrer"},f=i(`<p>拉取镜像：</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">pull</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">snowdreamtech/frpc</span></span>
<span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">pull</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">snowdreamtech/frps</span></span>
<span class="line"></span></code></pre></div><p>配置文件内可以使用类似 <code>{{ .Envs.NAME }}</code> 的格式可以读取环境变量。</p><p>下面的示例是将本地的 <code>http://127.0.0.1:4090</code> 映射到公网服务器的 <code>http://xxx.xxx.xxx.xxx:4090</code>。</p><h3 id="21-客户端配置" tabindex="-1"><a class="header-anchor" href="#21-客户端配置"><span>2.1 客户端配置</span></a></h3><p>客户端 frpc 配置文件 <code>frpc.toml</code>：</p><div class="language-toml" data-ext="toml" data-title="toml"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#9CDCFE;">serverAddr</span><span style="color:#D4D4D4;">  = {{ .Envs.FRP_SERVER_ADDR }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">serverPort</span><span style="color:#D4D4D4;">  = {{ .Envs.FRP_SERVER_PORT }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">token</span><span style="color:#D4D4D4;">       = {{ .Envs.FRP_SERVER_TOKEN }</span><span style="color:#F44747;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">[app]</span></span>
<span class="line"><span style="color:#9CDCFE;">type</span><span style="color:#D4D4D4;">        = </span><span style="color:#CE9178;">&quot;tcp&quot;</span></span>
<span class="line"><span style="color:#9CDCFE;">remotePort</span><span style="color:#D4D4D4;">  = </span><span style="color:#B5CEA8;">4090</span></span>
<span class="line"><span style="color:#9CDCFE;">localIp</span><span style="color:#D4D4D4;">     = {{ .Envs.APP_HOST }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">localPort</span><span style="color:#D4D4D4;">   = </span><span style="color:#B5CEA8;">4090</span></span>
<span class="line"></span></code></pre></div><p>Docker Compose 配置文件 <code>docker-compose.yml</code>：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">version</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;3&quot;</span></span>
<span class="line"><span style="color:#569CD6;">services</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">frpc</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">container_name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">frpc</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">restart</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">always</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">image</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">snowdreamtech/frpc:0.53.2</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">/etc/localtime:/etc/localtime:ro</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">/etc/timezone:/etc/timezone:ro</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">./frpc.toml:/etc/frp/frpc.toml:ro</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">network_mode</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">host</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">environment</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_SERVER_ADDR</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">xxx.xxx.xxx.xxx</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;"># 公网服务器地址</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_SERVER_PORT</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">9870</span><span style="color:#D4D4D4;">             </span><span style="color:#6A9955;"># 服务隧道端口</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_SERVER_TOKEN</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">xxxxxx</span><span style="color:#D4D4D4;">          </span><span style="color:#6A9955;"># 服务隧道密码</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">APP_HOST</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">127.0.0.1</span><span style="color:#D4D4D4;">               </span><span style="color:#6A9955;"># 本地程序地址</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logging</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">driver</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;json-file&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">options</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">max-size</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;1m&quot;</span></span>
<span class="line"><span style="color:#569CD6;">networks</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">host</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">host</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">external</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此处直接使用 <code>host</code> 网络用于读取宿主机的应用程序，也可以使用自定义网络来通信。</p><p>启动客户端：</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker-compose</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">up</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-d</span></span>
<span class="line"></span></code></pre></div><p>关闭客户端：</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker-compose</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">down</span></span>
<span class="line"></span></code></pre></div><h3 id="22-服务端配置" tabindex="-1"><a class="header-anchor" href="#22-服务端配置"><span>2.2 服务端配置</span></a></h3><p>服务端 frps 配置文件 <code>frps.toml</code>：</p><div class="language-toml" data-ext="toml" data-title="toml"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#9CDCFE;">bindPort</span><span style="color:#D4D4D4;">        = {{ .Envs.FRP_SERVER_PORT }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">token</span><span style="color:#D4D4D4;">           = {{ .Envs.FRP_SERVER_TOKEN }</span><span style="color:#F44747;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">dashboardAddr</span><span style="color:#D4D4D4;">   = </span><span style="color:#CE9178;">&quot;0.0.0.0&quot;</span></span>
<span class="line"><span style="color:#9CDCFE;">dashboardPort</span><span style="color:#D4D4D4;">   = {{ .Envs.FRP_ADMIN_PORT }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">dashboardUser</span><span style="color:#D4D4D4;">   = {{ .Envs.FRP_ADMIN_USER }</span><span style="color:#F44747;">}</span></span>
<span class="line"><span style="color:#9CDCFE;">dashboardPwd</span><span style="color:#D4D4D4;">    = {{ .Envs.FRP_ADMIN_PASS }</span><span style="color:#F44747;">}</span></span>
<span class="line"></span></code></pre></div><p>注意下面开放的三个端口：</p><ul><li><code>9870</code>：服务隧道端口，用于提供代理服务</li><li><code>7890</code>：管理界面</li><li><code>4090</code>：用于客户端连接的端口</li></ul><p>将下面的 <code>docker-compose.yml</code> 文件保存在不同位置。</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#569CD6;">version</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;3&quot;</span></span>
<span class="line"><span style="color:#569CD6;">services</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">frps</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">restart</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">always</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">container_name</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">frps</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">image</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">snowdreamtech/frps:0.53.2</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">volumes</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">/etc/localtime:/etc/localtime:ro</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">/etc/timezone:/etc/timezone:ro</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">./frps.toml:/etc/frp/frps.toml</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">ports</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">9870:9870</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">7890:7890</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">4090:4090</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">environment</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_SERVER_PORT</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">9870</span><span style="color:#D4D4D4;">     </span><span style="color:#6A9955;"># 服务隧道端口</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_SERVER_TOKEN</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">xxxxxx</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;"># 服务隧道密码</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_ADMIN_PORT</span><span style="color:#D4D4D4;">: </span><span style="color:#B5CEA8;">7890</span><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;"># 管理界面端口</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_ADMIN_USER</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">username</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;"># 管理界面用户名</span></span>
<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#569CD6;">FRP_ADMIN_PASS</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">password</span><span style="color:#D4D4D4;">  </span><span style="color:#6A9955;"># 管理界面密码</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">networks</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">      - </span><span style="color:#CE9178;">frps</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">logging</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">driver</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;json-file&quot;</span></span>
<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#569CD6;">options</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">          </span><span style="color:#569CD6;">max-size</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;1m&quot;</span></span>
<span class="line"><span style="color:#569CD6;">networks</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#569CD6;">frps</span><span style="color:#D4D4D4;">:</span></span>
<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">external</span><span style="color:#D4D4D4;">: </span><span style="color:#569CD6;">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动服务端：</p><div class="language-bash" data-ext="sh" data-title="sh"><pre class="shiki dark-plus" style="background-color:#1E1E1E;" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">docker</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">network</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">create</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">frps</span></span>
<span class="line"><span style="color:#DCDCAA;">docker-compose</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">up</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">-d</span></span>
<span class="line"></span></code></pre></div>`,23);function R(P,F){const l=o("router-link"),p=o("ExternalLinkIcon"),c=o("Mermaid");return t(),D("div",null,[y,s("nav",v,[s("ul",null,[s("li",null,[a(l,{to:"#1-frp-简介"},{default:e(()=>[n("1. FRP 简介")]),_:1})]),s("li",null,[a(l,{to:"#2-docker-部署"},{default:e(()=>[n("2. Docker 部署")]),_:1}),s("ul",null,[s("li",null,[a(l,{to:"#21-客户端配置"},{default:e(()=>[n("2.1 客户端配置")]),_:1})]),s("li",null,[a(l,{to:"#22-服务端配置"},{default:e(()=>[n("2.2 服务端配置")]),_:1})])])])])]),u,s("p",null,[n("FRP 是一个由 Go 编写的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等协议。它可以轻松地进行内网穿透，对外网提供服务。其 GitHub 仓库为 "),s("a",C,[n("fatedier/frp"),a(p)]),n("。")]),m,a(c,{id:"mermaid-15",code:"eJx1j70OgjAUhXee4o46kEBZiIOjiYkxxp+JMECtQmygaaksPLy3thbUMDX5Tm6/c+6yEBXsjgHAicknk9lNCgV93VUgdMlrCttDjulFMRkvMo0PxPnSEeII8SRxJPEkhjBcu98/Z/8o+UZKl65aSwsOe9b1rXxAjJFtWlOGdbhJq1Z1qzRKo7cSYCMFxQyH0CnxAnOKmDXXeRGZinDlKCJ2q/0Ukx/NOM0ceo0dZrLhrJuG8cGWmo9I8AKmynxe"}),E,b,h,s("p",null,[n("比较流行的 FRP 镜像是由 "),s("a",_,[n("@snowdreamtech"),a(p)]),n(" 提供的，包括 "),s("a",x,[n("frpc"),a(p)]),n(" 和 "),s("a",k,[n("frps"),a(p)]),n(" 两个镜像。")]),f])}const g=r(d,[["render",R],["__file","frp.html.vue"]]);export{g as default};
